@using Gestreino.Models
@model PasswordResetTokenViewModel
@{
    ViewBag.Title = "Recuperar senha de acesso";
}
<div class="login_wrapper">
    <div class="animate form login_form">
        <section class="login_content">
            @if (Model.Status == 0 || Model.Status == 2)
            {
                using (Ajax.BeginForm("", null, new AjaxOptions { HttpMethod = "POST", LoadingElementId = "", LoadingElementDuration = 2000, OnBegin = "loadIn", OnComplete = "loadOut", OnSuccess = "handleSuccess", OnFailure = "handleFailure", UpdateTargetId = "" }, new { id = "" }))
                {
                
                <h1><img src="~/Assets/images/icon.jpg" width="40" class="navImg" /> Gestreino</h1>
                <h2>Recuperar senha de acesso</h2>
        <div class="alert alert-accent"
             role="alert">
            <div class="d-flex flex-wrap align-items-start">
                <div class="mr-8pt">
                    <i class="fa fa-warning"></i>
                </div>
                <div class="flex"
                     style="min-width: 180px">
                    <small class="text-black-100">
                        <strong>@ViewBag.Message</strong>
                    </small>
                </div>
            </div>
        </div>
                <div class="row mb-4 mt-3">
                    <div class="col-md-10">
                        @Html.ActionLink("Iniciar sessão", "login", new { }, new { @class = "" })
                    </div>
                </div>
                }
            }
            @if (Model.Status == 1)
            {
                using (Ajax.BeginForm("../account/PasswordRecoveryToken", null, new AjaxOptions { HttpMethod = "POST", LoadingElementId = "", LoadingElementDuration = 2000, OnBegin = "loadIn", OnComplete = "loadOut", OnSuccess = "handleSuccess", OnFailure = "handleFailure", UpdateTargetId = "" }, new { id = "" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.HiddenFor(m => m.TOKENID)
                    @Html.HiddenFor(m => m.TOKEN)
                    @Html.HiddenFor(m => m.Email)
                    <h1><img src="~/Assets/images/icon.jpg" width="40" class="navImg" /> Gestreino</h1>
                    <h2>Recuperar senha de acesso</h2>
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="handle-error alert alert-accent mb-2"
                                 role="alert" style="display:none ;">
                                <div class="d-flex flex-wrap align-items-start">
                                    <div class="mr-8pt">
                                        <i class="fa-solid fa-shield-halved"></i>&nbsp;
                                    </div>
                                    <div class="flex"
                                         style="min-width: 180px">
                                        <span class="text-black-100">
                                            <strong>Atenção!</strong> <span class="handle-error-message"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="handle-success alert alert-soft-success"
                                 role="alert" style="display:none;">
                                <div class="d-flex flex-wrap align-items-start">
                                    <div class="mr-8pt">
                                        <i class="fa fa-check-circle mr-12pt"></i>
                                    </div>
                                    <div class="flex"
                                         style="min-width: 180px">
                                        <small class="text-black-100">
                                            &nbsp;<strong>Successo!</strong> <span class="handle-success-message"></span>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    @*<h5><b>@Model.Login</b></h5>*@
                    <div class="form-group">
                        @Html.LabelFor(m => m.Password, new { @class = "control-label" })
                        @Html.PasswordFor(m => m.Password, new { @class = "form-control", required = "required", id = "Password" })
                        @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.ConfirmPassword, new { @class = "control-label" })
                        @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", id = "ConfirmPassword", required = "required", })
                    </div>
                    <div class="row">
                        <div class="col-md-10">
                            <input type="submit" class="btn btn-secondary submit" value="Submeter">
                        </div>
                    </div>
                    <div class="row mb-4 mt-3">
                        <div class="col-md-10">
                            @Html.ActionLink("Iniciar sessão", "login", new { }, new { @class = "" })
                        </div>
                    </div>
                }
            }
        </section>
    </div>
</div>